---
name: tdd-feature
enabled: true
description: "Plan feature with tests first, then implement with ralph-loop"
inputs:
  prompt: { required: true, description: "Feature to build with TDD approach" }
  feature_name: { required: true, description: "Feature name for spec file" }
steps:
  - name: plan
    type: skill
    skill: feature-dev:feature-dev
    args: "{{prompt}} - Design with comprehensive test coverage first"
    output:
      spec_file: "audit/{{feature_name}}.md"
  - name: write-tests
    type: script
    script: |
      echo "ðŸ“ Writing tests first (TDD approach)..."
      # This would integrate with a test-writing plugin
  - name: implement
    type: script
    script: |
      SCRIPT_PATH="$(find ~/.claude/plugins -name 'setup-ralph-loop.sh' -path '*ralph-loop*' 2>/dev/null | head -1)"
      bash "$SCRIPT_PATH" "Implement features from {{spec_file}} using TDD - write failing tests first, then make them pass" --max-iterations 50 --completion-promise DONE
---

# Test-Driven Development Chain

This chain enforces TDD methodology:

1. **Plan Phase**: Design feature with testing strategy
2. **Write Tests**: Create comprehensive test suite first
3. **Implementation**: Implement feature to make tests pass

## Usage

```bash
/chainer:run tdd-feature \
  --prompt="Add user authentication" \
  --feature_name="auth"
```

## Requirements

- `feature-dev` plugin installed
- `ralph-loop` plugin installed
- Test framework configured in project

## TDD Workflow

1. Write comprehensive tests for the feature
2. Run tests (they should fail - red)
3. Implement minimum code to pass tests (green)
4. Refactor while keeping tests passing

## Example

```bash
# Build payment processing with TDD
/chainer:run tdd-feature \
  --prompt="Stripe payment integration with webhook handling" \
  --feature_name="payments"
```
